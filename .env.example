# Environment Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# APP CONFIGURATION
# =============================================================================
APP_NAME=MP4toText
APP_ENV=development
DEBUG=True
SECRET_KEY=your-super-secret-key-change-this-in-production

# API Configuration
API_V1_PREFIX=/api/v1
CORS_ORIGINS=["http://localhost:3000","http://localhost:19006"]

# =============================================================================
# DATABASE
# =============================================================================
DATABASE_URL=postgresql://mp4totext:password@localhost:5432/mp4totext
DB_ECHO=False

# =============================================================================
# REDIS
# =============================================================================
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=

# =============================================================================
# STORAGE (MinIO / S3)
# =============================================================================
STORAGE_ENDPOINT=http://localhost:9000
STORAGE_ACCESS_KEY=minioadmin
STORAGE_SECRET_KEY=minioadmin
STORAGE_BUCKET=mp4totext
STORAGE_REGION=us-east-1
STORAGE_SECURE=False

# For AWS S3 (production)
# STORAGE_ENDPOINT=s3.amazonaws.com
# STORAGE_ACCESS_KEY=your-aws-access-key
# STORAGE_SECRET_KEY=your-aws-secret-key
# STORAGE_BUCKET=mp4totext-prod
# STORAGE_REGION=us-east-1
# STORAGE_SECURE=True

# =============================================================================
# AI SERVICES
# =============================================================================

# Whisper (local by default, can use OpenAI API)
WHISPER_MODEL_SIZE=base
WHISPER_DEVICE=cpu  # or cuda
# OPENAI_API_KEY=sk-your-openai-key  # Optional: Use OpenAI API instead of local

# Gemini AI
GEMINI_API_KEY=your-gemini-api-key-here
GEMINI_MODEL=gemini-1.5-flash-latest

# HuggingFace (for Pyannote models)
HF_TOKEN=hf_your_huggingface_token

# =============================================================================
# GLOBAL SPEAKER MODEL (RunPod)
# =============================================================================
GLOBAL_MODEL_PATH=models/best_model.pth
GLOBAL_MAPPING_PATH=models/speaker_mapping.json
GLOBAL_MODEL_THRESHOLD=0.70

# =============================================================================
# JWT AUTHENTICATION
# =============================================================================
JWT_SECRET=your-jwt-secret-key-change-this
JWT_ALGORITHM=HS256
JWT_EXPIRATION=3600  # seconds (1 hour)
JWT_REFRESH_EXPIRATION=604800  # seconds (7 days)

# =============================================================================
# CELERY (Background Tasks)
# =============================================================================
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2
CELERY_TASK_TRACK_STARTED=True
CELERY_TASK_TIME_LIMIT=3600  # 1 hour
CELERY_TASK_SOFT_TIME_LIMIT=3300  # 55 minutes

# =============================================================================
# FILE UPLOAD
# =============================================================================
MAX_UPLOAD_SIZE=104857600  # 100 MB in bytes
ALLOWED_AUDIO_FORMATS=mp3,wav,m4a,flac,ogg,aac,wma
ALLOWED_VIDEO_FORMATS=mp4,avi,mkv,mov,wmv,flv

# =============================================================================
# IMAGE GENERATION
# =============================================================================

# Modal.com (SDXL, FLUX)
# Get tokens by running: modal token new
# More info: https://modal.com/docs/guide/secrets
MODAL_TOKEN_ID=your_modal_token_id_here
MODAL_TOKEN_SECRET=your_modal_token_secret_here

# Replicate (Google Imagen-4)
# Get token from: https://replicate.com/account/api-tokens
REPLICATE_API_TOKEN=your_replicate_api_token_here

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# =============================================================================
# LOGGING
# =============================================================================
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json  # json or text
LOG_FILE=logs/app.log

# =============================================================================
# MONITORING
# =============================================================================
SENTRY_DSN=  # Optional: Sentry error tracking
SENTRY_ENVIRONMENT=development

# =============================================================================
# EMAIL (Optional - for notifications)
# =============================================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=noreply@mp4totext.com

# =============================================================================
# DEVELOPMENT / TESTING
# =============================================================================
TEST_DATABASE_URL=postgresql://mp4totext:password@localhost:5432/mp4totext_test
PYTEST_WORKERS=4

# =============================================================================
# PRODUCTION SPECIFIC
# =============================================================================
# Uncomment and configure for production deployment

# WORKERS=4  # Number of Gunicorn workers
# WORKER_CLASS=uvicorn.workers.UvicornWorker
# WORKER_TIMEOUT=120
# KEEPALIVE=5

# SSL/TLS
# SSL_CERTFILE=/path/to/cert.pem
# SSL_KEYFILE=/path/to/key.pem

# Trust Proxy (if behind load balancer)
# TRUST_PROXY=True
